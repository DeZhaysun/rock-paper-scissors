<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>RPS</title>
  </head>
  <body>
    <button id="rock">Rock</button>
    <button id="paper">Paper</button>
    <button id="scissors">Scissors</button>

    <div class="result"></div>
    
    <script>
      function computerPlay() {
        let rand = Math.floor(Math.random() * 3);
        if (rand == 0) {
          return "rock";
        } else if (rand == 1) {
          return "paper";
        } else {
          return "scissors";
        }
      }

      function playRound(playerSelection, computerSelection) {
        playerSelection = playerSelection.toLowerCase();

        if (playerSelection == "rock" && computerSelection == "paper") {
          return "You lose! Paper beats Rock";
        } else if (playerSelection == "paper" && computerSelection == "scissors") {
          return "You lose! Scissors beats Paper";
        } else if ( playerSelection == "scissors" && computerSelection == "rock") {
          return "You lose! Rock beats Scissors";
        } else if (computerSelection == "rock" && playerSelection == "paper") {
          return "You win! Paper beats Rock";
        } else if (computerSelection == "paper" && playerSelection == "scissors") {
          return "You win! Scissors beats Paper";
        } else if (computerSelection == "scissors" && playerSelection == "rock") {
          return "You win! Rock beats Scissors";
        } else {
          return "Tie!";
        }
      }

      let player = 0;
      let computer = 0;

      const buttons = document.querySelectorAll('button');

      buttons.forEach((button) => {
        button.addEventListener('click', () => {
          const result = document.querySelector('.result');
          result.textContent = playRound(`${button.id}`, computerPlay());

          if (result.textContent == "Tie!"){
            return;
          } else if (result.textContent.substring(4,5) == 'w'){
            player++;
          } else{
            computer++;
          }

          if (player == 5){
            result.textContent += ". You have won 5 times!";
            player = 0;
            computer = 0;
          } else if (computer == 5){
            result.textContent += ". The computer has won 5 times!"
            player = 0;
            computer = 0;
          }
        });
      });

    </script>
  </body>
</html>
